@page "/documentation"
@using Microsoft.AspNetCore.Components
@inject IJSRuntime JSRuntime

<PageTitle>Documentation - Elescan</PageTitle>

<script>
    // Disable browser scroll restoration
    if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
    }
    
    // Immediate scroll to top - multiple approaches
    if (window.scrollTo) window.scrollTo(0, 0);
    if (document.documentElement) document.documentElement.scrollTop = 0;
    if (document.body) document.body.scrollTop = 0;
    
    // Force scroll to top on page load
    window.addEventListener('load', function() {
        setTimeout(function() {
            window.scrollTo(0, 0);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
        }, 100);
    });
    
    // Also ensure it happens when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
        window.scrollTo(0, 0);
        document.documentElement.scrollTop = 0;
        document.body.scrollTop = 0;
        
        // Force again after a short delay to override any other scripts
        setTimeout(function() {
            window.scrollTo(0, 0);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
        }, 50);
    });
    
    // Force scroll to top when page becomes visible
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            window.scrollTo(0, 0);
        }
    });
</script>

<style>
    /* Force immediate scroll behavior for documentation page */
    html {
        scroll-behavior: auto !important;
        scroll-top: 0 !important;
    }
    
    body {
        scroll-behavior: auto !important;
        scroll-top: 0 !important;
    }
    
    .page-wrapper {
        position: relative;
        top: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }
    
    /* Ensure the page starts at the top */
    * {
        scroll-margin-top: 0 !important;
        scroll-padding-top: 0 !important;
    }
    
    /* Force all elements to not auto-focus */
    * {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    /* Allow text selection for content */
    .documentation-content * {
        -webkit-user-select: text;
        -moz-user-select: text;
        -ms-user-select: text;
        user-select: text;
    }
    
    /* Force page to start at top with CSS positioning */
    html, body {
        position: relative;
        top: 0 !important;
    }
    
    /* Prevent any element from causing scroll */
    body > * {
        scroll-margin: 0 !important;
        scroll-padding: 0 !important;
    }
    
    /* Documentation-specific styles */
    .documentation-links {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin: 2rem 0;
    }
    
    .doc-link-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .doc-link-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }
    
    .doc-link-card h2 {
        color: #333;
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }
    
    .doc-link-card p {
        color: #666;
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }
    
    .guide-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #007AFF 0%, #1E90FF 100%);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 500;
        transition: opacity 0.2s ease;
    }
    
    .guide-link:hover {
        opacity: 0.9;
    }
    
    .guide-link i {
        font-size: 1.2rem;
    }
</style>

<div class="page-wrapper">
    <!-- Top anchor for navigation -->
    <a id="top" name="top" style="position: absolute; top: 0; left: 0; width: 1px; height: 1px; opacity: 0;"></a>
    
    <!-- Home Button - Fixed Position -->
    <a href="/" class="home-button" title="Back to Home" style="position: fixed; top: 20px; left: 20px; display: flex; align-items: center; justify-content: center; width: 60px; height: 60px; background-color: white; border-radius: 50%; color: #131B3F; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(0,0,0,0.3); z-index: 1000;">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width: 28px; height: 28px; stroke: #131B3F;">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
    </a>

    <!-- Top Navigation Bar -->
    <nav class="top-nav" style="background: linear-gradient(135deg, #131B3F 0%, #06b6d4 100%); padding: 0.5rem 0; border: none; box-shadow: none;">
        <div class="nav-container" style="max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: flex; align-items: center; justify-content: space-between; border: none;">
            <a href="/" class="nav-logo" style="display: flex; align-items: center; text-decoration: none;">
                <img src="/images/logo.png" alt="Elescan Logo" style="height: 80px; width: auto;">
            </a>
            
            <div class="nav-links" style="display: flex; gap: 1.5rem; align-items: center;">
                <a href="/" style="color: white; text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; transition: background 0.3s ease;">Home</a>
                <a href="/who-can-use" style="color: white; text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; transition: background 0.3s ease;">Who can use Elescan?</a>
                <a href="/support" style="color: white; text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; transition: background 0.3s ease;">Support</a>
                <a href="/privacy-policy" style="color: white; text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; transition: background 0.3s ease;">Privacy Policy</a>
                <a href="/terms" style="color: white; text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; transition: background 0.3s ease;">Terms of Service</a>
            </div>
        </div>
    </nav>

    <div class="documentation-content">
        <div class="container">
            <h1>Documentation</h1>
            
            <div class="documentation-links">
                <div class="doc-link-card">
                    <h2>Mobile App Guide</h2>
                    <p>Learn how to use the Elescan mobile application effectively with our comprehensive user guide.</p>
                    <a href="https://app.elescan.com/howto" target="_blank" rel="noopener noreferrer" class="guide-link">
                        <i class="fas fa-mobile-alt"></i>
                        View Mobile App Guide
                    </a>
                </div>

                <div class="doc-link-card">
                    <h2>Web Portal Guide</h2>
                    <p>Explore the features and functionality of our web portal with step-by-step instructions.</p>
                    <a href="https://app.elescan.com/howtoweb" target="_blank" rel="noopener noreferrer" class="guide-link">
                        <i class="fas fa-desktop"></i>
                        View Web Portal Guide
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <h2>Ready to Transform Your Practice?</h2>
            <p>Join thousands of healthcare professionals who trust Elescan for their document management needs.</p>
            <div class="cta-buttons">
                <a href="https://apps.apple.com/us/app/elescan/id6743489325" class="download-btn download-btn-large" target="_blank">
                    <img src="/images/download.svg" alt="Download on App Store" class="download-image">
                </a>
            </div>
            <p class="cta-note">No sales calls, no lengthy demos. Just download, accept our BAA, and start scanning!</p>
        </div>
    </section>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                // Multiple approaches to force scroll to top
                await JSRuntime.InvokeVoidAsync("scrollTo", 0, 0);
                await JSRuntime.InvokeVoidAsync("eval", "document.documentElement.scrollTop = 0; document.body.scrollTop = 0;");
                await JSRuntime.InvokeVoidAsync("eval", "window.location.hash = '#top';");
                await JSRuntime.InvokeVoidAsync("eval", "setTimeout(() => { window.scrollTo(0, 0); }, 100);");
            }
            catch (Exception ex)
            {
                // Ignore any JavaScript errors
                Console.WriteLine($"Scroll error: {ex.Message}");
            }
        }
    }
} 